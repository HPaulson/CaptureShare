{"remainingRequest":"/media/hpaulson/HDD/Development/temp-name/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/hpaulson/HDD/Development/temp-name/client/src/components/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/hpaulson/HDD/Development/temp-name/client/src/components/home.vue","mtime":1591420056663},{"path":"/media/hpaulson/HDD/Development/temp-name/client/node_modules/babel-loader/lib/index.js","mtime":1589683287342},{"path":"/media/hpaulson/HDD/Development/temp-name/client/node_modules/cache-loader/dist/cjs.js","mtime":1589683287335},{"path":"/media/hpaulson/HDD/Development/temp-name/client/node_modules/vue-loader/lib/index.js","mtime":1589683293769}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVcGxvYWRTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL3VwbG9hZFNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImhvbWVDb21wb25ldCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZGVkRmlsZXM6IFtdLAogICAgICBlcnJvcjogbnVsbCwKICAgICAgY3VycmVudFN0YXR1czogbnVsbCwKICAgICAgdXBsb2FkRmllbGROYW1lOiAiZmlsZSIsCiAgICAgIG5vdzogbmV3IERhdGUoKQogICAgfTsKICB9LAogICAgICBjcmVhdGVkICgpIHsKICAgVXBsb2FkU2VydmljZS5nZXRGaWxlcyh0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXIpCiAgICAgICAgICAudGhlbigoeCkgPT4gewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUZpbGVzJywgeCkKICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge3RoaXMubm93ID0gbmV3IERhdGV9LCAxMDAwKQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy5lcnJvciA9IGVycjsKICAgICAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IDM7CiAgICAgICAgfSk7CiAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgIHN0YXJ0KCkgewogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0dXMgPT09IDA7CiAgICAgIH0sCiAgICAgIHNhdmVkKCkgewogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0dXMgPT09IDE7CiAgICAgIH0sCiAgICAgIHN1Y2VzcygpIHsKICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U3RhdHVzID09PSAyOwogICAgICB9LAogICAgICBmYWlsKCkgewogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0dXMgPT09IDM7CiAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICByZW1vdmUoaWQpIHsKICAgICAgaWYgKGNvbmZpcm0oaWQgPT09ICJhbGwiID8gIkRlbGV0ZSBhbGwgZmlsZXM/IiA6ICJEZWxldGUgZmlsZTogIiArIGlkKSkgewogICAgICAgICAgVXBsb2FkU2VydmljZS5yZW1vdmUoaWQsIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IDA7CiAgICAgIHRoaXMudXBsb2FkZWRGaWxlcyA9IFtdOwogICAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgIH0sCiAgICBzYXZlKGZvcm1EYXRhKSB7CiAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IDE7CiAgICAgIFVwbG9hZFNlcnZpY2UudXBsb2FkKGZvcm1EYXRhLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLnVzZXIpCiAgICAgICAgLnRoZW4oeCA9PiB7CiAgICAgICAgICB0aGlzLnVwbG9hZGVkRmlsZXMgPSBbXS5jb25jYXQoeCk7CiAgICAgICAgICB0aGlzLmN1cnJlbnRTdGF0dXMgPSAyOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKQogICAgICAgICAgICB0aGlzLmVycm9yID0gIjQwMCB8IEZpbGV0eXBlIG5vdCBhbGxvd2VkIjsKICAgICAgICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpCiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSAiNDA5IHwgRmlsZSBhbHJlYWR5IGV4aXN0cy4iOwogICAgICAgICAgZWxzZSB0aGlzLmVycm9yID0gZXJyOwogICAgICAgICAgdGhpcy5jdXJyZW50U3RhdHVzID0gMzsKICAgICAgICB9KTsKICAgIH0sCiAgICBuZXdGaWxlKGZpZWxkTmFtZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgaWYgKCFmaWxlTGlzdC5sZW5ndGgpIHJldHVybjsKICAgICAgQXJyYXkuZnJvbShBcnJheShmaWxlTGlzdC5sZW5ndGgpLmtleXMoKSkubWFwKHggPT4gewogICAgICAgIGZvcm1EYXRhLmFwcGVuZChmaWVsZE5hbWUsIGZpbGVMaXN0W3hdLCBmaWxlTGlzdFt4XS5uYW1lKTsKICAgICAgfSk7CgogICAgICB0aGlzLnNhdmUoZm9ybURhdGEpOwogICAgfSwKICAgIGFzeW5jIGNoYW5nZVBhZ2UocGFnZSkgewogICAgIGlmIChwYWdlID09PSAwKSB7CiAgICAgICBhd2FpdCBVcGxvYWRTZXJ2aWNlLmdldEZpbGVzKHRoaXMuJHN0b3JlLmdldHRlcnMudXNlcikKICAgICAgICAgIC50aGVuKHggPT4gewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUZpbGVzJywgeCkKICAgICAgICAgIH0pfQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZVBhZ2UnLCBwYWdlKQogICAgfSwKICAgIGxvZ291dCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VVc2VyJywgbnVsbCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgIH0sCiAgfQo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"container\">\n    <div class=\"body\">\n\n    <div class=\"grid-container\" id=\"page0\" v-if=\"this.$store.getters.page === 0\">\n       <div class=\"menu-icon\">\n        <i class=\"fas fa-bars header__menu\"></i>\n       </div>\n   <header class=\"header\">\n    <div class=\"header__search\"></div>\n    <div class=\"header__avatar\"></div>\n  </header>\n  \n\n  <aside class=\"sidenav\">\n    <div class=\"sidenav__close-icon\">\n      <i class=\"fas fa-times sidenav__brand-close\"></i>\n    </div>\n    <ul class=\"sidenav__list\">\n      <li class=\"sidenav__list-item\"><a @click=\"logout\">Logout</a></li>\n    </ul>\n  </aside>\n\n  <main class=\"main\">\n    <div class=\"main-header\">\n      <div class=\"main-header__heading\">Welcome {{ this.$store.getters.user }}!</div>\n      <div class=\"main-header__updates\">{{ now }}</div>\n    </div>\n    <div class=\"main-cards\">\n      <div style=\"width: 100%\" class=\"card\">Upload\n              <form enctype=\"multipart/form-data\" novalidate v-if=\"start || saved\" class=\"uploadwrapper\">\n        <h1>Upload Files</h1>\n              <img\n        style=\"position:relative; top:10px;\"\n        src=\"../assets/recycling-bin.png\"\n        width=\"35\"\n        height=\"35\"\n        v-on:click=\"remove('all')\"\n      />\n        <div class=\"dropbox\">\n          <input\n            type=\"file\"\n            multiple\n            :name=\"uploadFieldName\"\n            :disabled=\"saved\"\n            @change=\"\n              newFile($event.target.name, $event.target.files);\n              fileCount = $event.target.files.length;\n            \"\n            class=\"input-file\"\n          />\n          <p v-if=\"start\">Choose File to Upload<br /></p>\n          <p v-if=\"saved\">Processing {{ fileCount }} files...</p>\n        </div>\n      </form>\n\n      <div v-if=\"sucess\">\n        <h2>Uploaded {{ uploadedFiles.length }} file(s) successfully.</h2>\n        <p>\n          <a href=\"javascript:void(0)\" @click=\"reset()\">Upload again</a>\n        </p>\n        <ul class=\"list-unstyled\">\n          <li v-bind:key=\"item\" v-for=\"item in uploadedFiles\">\n            <p>{{ item.url }}</p>\n            <img :src=\"item.url\" class=\"img\" :alt=\"item.originalName\" />\n          </li>\n        </ul>\n      </div>\n\n      <div v-if=\"fail\">\n        <h2>Uploaded failed.</h2>\n        <p>\n          <a href=\"javascript:void(0)\" @click=\"reset()\">Try again</a>\n        </p>\n        <pre>{{ error }}</pre>\n      </div>\n    </div>\n  </div>\n  </div>\n      <i class=\"fas fa-upload\" style=\"vertical-align: middle;\"></i> \n      </div>\n      <h1>Recent Files</h1>\n  <div class=\"uploads-container\">\n    <p class = \"card\"\n      v-for=\"(file, index) in this.$store.getters.uploads\"\n      v-bind:item=\"file\"\n      v-bind:index=\"index\"\n      v-bind:key=\"file._id\"\n      >\n    <b>File: </b>{{file._id}}                    <b>Size: </b>{{file.fileSize / 1000}}KB\n\n    <b>Type: </b>{{file.fileType}}                    <b>Uploaded By: </b>{{file.user}}</p>\n    </div>\n  <footer class=\"footer\">\n    <div class=\"footer__copyright\"></div>\n    <div class=\"footer__signature\"></div>\n  </footer>\n</div>\n</template>\n\n<script>\nimport UploadService from \"../services/uploadService\";\nexport default {\n  name: \"homeComponet\",\n  data() {\n    return {\n      uploadedFiles: [],\n      error: null,\n      currentStatus: null,\n      uploadFieldName: \"file\",\n      now: new Date()\n    };\n  },\n      created () {\n   UploadService.getFiles(this.$store.getters.user)\n          .then((x) => {\n            this.$store.commit('changeFiles', x)\n            setInterval(() => {this.now = new Date}, 1000)\n          })\n          .catch(err => {\n          this.error = err;\n          this.currentStatus = 3;\n        });\n  },\n    computed: {\n      start() {\n        return this.currentStatus === 0;\n      },\n      saved() {\n        return this.currentStatus === 1;\n      },\n      sucess() {\n        return this.currentStatus === 2;\n      },\n      fail() {\n        return this.currentStatus === 3;\n      }\n    },\n    methods: {\n    remove(id) {\n      if (confirm(id === \"all\" ? \"Delete all files?\" : \"Delete file: \" + id)) {\n          UploadService.remove(id, this.$store.getters.user);\n      } else {\n        return;\n      }\n    },\n    reset() {\n      this.currentStatus = 0;\n      this.uploadedFiles = [];\n      this.error = null;\n    },\n    save(formData) {\n      this.currentStatus = 1;\n      UploadService.upload(formData, this.$store.getters.user)\n        .then(x => {\n          this.uploadedFiles = [].concat(x);\n          this.currentStatus = 2;\n        })\n        .catch(err => {\n          if (err.response.status === 400)\n            this.error = \"400 | Filetype not allowed\";\n          if (err.response.status === 409)\n            this.error = \"409 | File already exists.\";\n          else this.error = err;\n          this.currentStatus = 3;\n        });\n    },\n    newFile(fieldName, fileList) {\n      const formData = new FormData();\n      if (!fileList.length) return;\n      Array.from(Array(fileList.length).keys()).map(x => {\n        formData.append(fieldName, fileList[x], fileList[x].name);\n      });\n\n      this.save(formData);\n    },\n    async changePage(page) {\n     if (page === 0) {\n       await UploadService.getFiles(this.$store.getters.user)\n          .then(x => {\n            this.$store.commit('changeFiles', x)\n          })}\n      this.$store.commit('changePage', page)\n    },\n    logout() {\n      this.$store.commit('changeUser', null)\n      this.$router.push('/login');\n    }\n    },\n    mounted() {\n      this.reset();\n    },\n  }\n</script>\n\n<style>\n\n:root {\n  --page-content-txtColor: #171616;\n  --page-content-blockColor: #fff;\n  --white: #fff;\n  --black: #333;\n  --blue: #00b9eb;\n  --red: #ec1848;\n  --border-radius: 4px;\n  --box-shadow: 0 0 10px -2px rgba(0, 0, 0, 0.075);\n}\n\n#upload {\n  position: absolute; \n            margin: auto; \n            top: 0; \n            left: 0; \n            right: 0; \n            bottom: 0; \n}\n\nh1 {\n  text-align: center;\n}\n\n/*\n.dropbox {\n  outline: 2px dashed grey;\n  outline-offset: -10px;\n  background: lightcyan;\n  color: dimgray;\n  padding: 10px 10px;\n  min-height: 200px;\n  position: relative;\n  cursor: pointer;\n} */\n/*\n.input-file {\n  opacity: 0;\n  position: absolute;\n}\n\n.dropbox:hover {\n  background: lightblue;\n}\n\n.dropbox p {\n  font-size: 1.2em;\n  text-align: center;\n  padding: 50px 0;\n} */\n\nbody {\n  margin: 0;\n  padding: 0;\n  color: #fff;\n  font-family: 'Open Sans', Helvetica, sans-serif;\n  box-sizing: border-box;\n  background-color: #444444;\n}\n\n.grid-container {\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 50px 1fr 50px;\n  grid-template-areas:\n    'header'\n    'main'\n    'footer';\n}\n\n.menu-icon {\n  position: fixed;\n  display: flex;\n  top: 5px;\n  left: 10px;\n  align-items: center;\n  justify-content: center;\n  background-color: #DADAE3;\n  border-radius: 50%;\n  z-index: 1;\n  cursor: pointer;\n  padding: 12px;\n}\n\n.header {\n  grid-area: header;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  background-color: #444444;\n}\n\n.header__search {\n  margin-left: 42px;\n}\n\n.sidenav {\n  grid-area: sidenav;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 240px;\n  position: fixed;\n  overflow-y: auto;\n  transform: translateX(-245px);\n  transition: all .6s ease-in-out;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.16), 0 0 0 1px rgba(0, 0, 0, 0.08);\n  z-index: 2;\n  background-color: #383838;\n}\n\n.sidenav.active {\n  transform: translateX(0);\n}\n\n.sidenav__close-icon {\n  position: absolute;\n  visibility: visible;\n  top: 8px;\n  right: 12px;\n  cursor: pointer;\n  font-size: 20px;\n  color: #ddd;\n}\n\n.sidenav__list {\n  padding: 0;\n  margin-top: 85px;\n  list-style-type: none;\n}\n\n.sidenav__list-item {\n  padding: 20px 20px 20px 40px;\n  color: #ddd;\n}\n\n.sidenav__list-item:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n  cursor: pointer;\n}\n\n.main {\n  grid-area: main;\n  background-color: #444444;\n}\n\n.main-header {\n  display: flex;\n  justify-content: space-between;\n  margin: 20px;\n  padding: 20px;\n  height: 150px;\n  background-color: #383838;\n  color: white;\n  border-radius: 15px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.main-overview {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(265px, 1fr));\n  grid-auto-rows: 94px;\n  grid-gap: 20px;\n  margin: 20px;\n}\n\n.overviewcard {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px;\n  background-color: #d3d3;\n}\n\n.main-cards {\n  column-count: 1;\n  column-gap: 20px;\n  margin: 20px;\n}\n\n.card {\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.footer {\n  grid-area: footer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  background-color: #444444;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n  width: 100%;\n  border: 1px solid #ddd;\n}\n\nth, td {\n  text-align: left;\n  padding: 8px;\n}\n\ntr:nth-child(even){background-color: #f2f2f2}\n</style>\n"]}]}